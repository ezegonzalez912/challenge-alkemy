(this["webpackJsonpchallenge-alkemy"]=this["webpackJsonpchallenge-alkemy"]||[]).push([[0],{72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),r=c(40),a=c.n(r),i=c(11),o=c(3),l=c(5),j="[AUTH] LOGIN",d="[AUTH] LOGOUT",h="[TEAM] ADD HERO",b="[TEAM] REMOVE TEAM",m=JSON.parse(localStorage.getItem("user-hero_app"))||{token:null,logged:!1},p=function(e,t){var c=t.type,s=t.payload;switch(c){case j:return{token:s,logged:!0};case d:return{token:null,logged:!1};default:return e}},u=c(0),O=Object(s.createContext)(),x=function(e){var t=e.children,c=Object(s.useReducer)(p,m),n=Object(l.a)(c,2),r=n[0],a=n[1];return Object(s.useEffect)((function(){localStorage.setItem("user-hero_app",JSON.stringify(r))}),[r]),Object(u.jsx)(O.Provider,{value:{user:r,dispatch:a},children:t})},g=function(){var e=Object(s.useContext)(O).dispatch,t=Object(s.useState)(!1),c=Object(l.a)(t,2),n=c[0],r=c[1];return{handleLogin:function(t){(function(e){var t=e.email,c=e.password;return new Promise((function(e,s){if("challenge@alkemy.org"===t&&"react"===c)return e({data:{token:"1A3svAAslosSw2"}});s((function(e){return e}))}))})(t).then((function(t){r(!1);var c=t.data.token;e({type:j,payload:c})})).catch((function(){r(!0)}))},handleLogout:function(){e({type:d})},error:n}},f=c(13),v=function(){var e=g(),t=e.handleLogin,c=e.error;return Object(u.jsx)("div",{className:"login_screen",children:Object(u.jsxs)("div",{className:"login_container",children:[Object(u.jsxs)("div",{className:"login_title",children:[Object(u.jsx)("p",{children:"WELCOME TO"}),Object(u.jsx)("h1",{className:"c-primary",children:"HEROES APP"})]}),Object(u.jsxs)("div",{className:"login_box-container",children:[Object(u.jsxs)("h1",{className:"login_box-title",children:["Please ",Object(u.jsx)("span",{className:"fw-400 c-primary",children:"login"})]}),Object(u.jsx)(f.d,{initialValues:{email:"",password:""},onSubmit:function(e){t(e)},validate:function(e){var t={};return e.email||(t.email="Required Email"),e.password||(t.password="Required Password"),t},children:function(e){return Object(u.jsxs)(f.c,{className:"login_form",children:[Object(u.jsxs)("div",{className:"login_form-fm",children:[Object(u.jsx)(f.b,{className:"login_form-field",placeholder:"Your email",type:"email",name:"email"}),Object(u.jsx)(f.a,{className:"login_form-msg",name:"email",component:"p"})]}),Object(u.jsxs)("div",{className:"login_form-fm",children:[Object(u.jsx)(f.b,{className:"login_form-field",placeholder:"Your password",type:"password",name:"password"}),Object(u.jsx)(f.a,{className:"login_form-msg",name:"password",component:"p"})]}),Object(u.jsx)("button",{className:"btn-primary login_form-btn",type:"submit",disabled:!e.isValid,children:" Login "})]})}}),c&&Object(u.jsx)("p",{className:"login_form-msg",children:"Email or password incorrect."})]}),Object(u.jsx)("p",{className:"msg-prod",children:"Correct email and password in the repository"})]})})},y=c(44),N=function(e){return parseInt(e.slice(0,-2))},w=function(e){return parseInt(e.slice(0,-2))},C={heroes:[],alignment:{bad:0,good:0},powerstats:{intelligence:0,strength:0,speed:0,durability:0,power:0,combat:0},appearance:{height:0,weight:0}},_=function(e,t){var c=t.type,s=t.payload,n=e.powerstats,r=e.appearance,a=e.alignment,i=e.heroes,o=s.powerstats,l=s.biography.alignment,j=s.appearance,d=j.height,m=j.weight;switch(c){case h:return{heroes:[].concat(Object(y.a)(i),[s]),alignment:{bad:"bad"===l?a.bad+1:a.bad,good:"good"===l?a.good+1:a.good},powerstats:{intelligence:n.intelligence+parseInt(o.intelligence),strength:n.strength+parseInt(o.strength),speed:n.speed+parseInt(o.speed),durability:n.durability+parseInt(o.durability),power:n.power+parseInt(o.power),combat:n.combat+parseInt(o.combat)},appearance:{height:r.height+N(d[1]),weight:r.weight+w(m[1])}};case b:return{heroes:i.filter((function(e){return e.id!==s.id})),alignment:{bad:"bad"===l?a.bad-1:a.bad,good:"good"===l?a.good-1:a.good},powerstats:{intelligence:n.intelligence-parseInt(o.intelligence),strength:n.strength-parseInt(o.strength),speed:n.speed-parseInt(o.speed),durability:n.durability-parseInt(o.durability),power:n.power-parseInt(o.power),combat:n.combat-parseInt(o.combat)},appearance:{height:r.height-N(d[1]),weight:r.weight-w(m[1])}};default:return e}},k=Object(s.createContext)(),S=function(e){var t=e.children,c=Object(s.useReducer)(_,C),n=Object(l.a)(c,2),r=n[0],a=n[1],i={myTeam:r,dispatch:a,heroInTeam:function(e){return r.heroes.includes(e)}};return Object(u.jsx)(k.Provider,{value:i,children:t})},I=function(){return Object(u.jsxs)("div",{className:"add-hero-card-container",children:[Object(u.jsx)("div",{className:"bar-1"}),Object(u.jsx)("div",{className:"bar-2"})]})},A=Object(s.createContext)(),M=function(e){var t=e.children,c=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),c=t[0],n=t[1];return[c,function(){return n(!c)}]}(),n=Object(l.a)(c,2),r=n[0],a=n[1],i=Object(s.useState)(null),o=Object(l.a)(i,2),j={isOpenModal:r,isChangeModal:a,hero:o[0],setHero:o[1]};return Object(u.jsx)(A.Provider,{value:j,children:t})},E=c(16),W=function(e){var t=e.powerstats,c=t.combat,s=t.durability,n=t.intelligence,r=t.power,a=t.speed,i=t.strength;return Object(u.jsxs)("div",{className:"hero-stats-list",children:[Object(u.jsxs)("div",{className:"hero-stats-list_item",title:c,children:[Object(u.jsx)("p",{children:"Combat"}),Object(u.jsx)(E.b,{percent:c,strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]}),Object(u.jsxs)("div",{className:"hero-stats-list_item",title:s,children:[Object(u.jsx)("p",{children:"Durability"}),Object(u.jsx)(E.b,{percent:s,strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]}),Object(u.jsxs)("div",{className:"hero-stats-list_item",title:n,children:[Object(u.jsx)("p",{children:"Intelligence"}),Object(u.jsx)(E.b,{percent:n,strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]}),Object(u.jsxs)("div",{className:"hero-stats-list_item",title:r,children:[Object(u.jsx)("p",{children:"Power"}),Object(u.jsx)(E.b,{percent:r,strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]}),Object(u.jsxs)("div",{className:"hero-stats-list_item",title:a,children:[Object(u.jsx)("p",{children:"Speed"}),Object(u.jsx)(E.b,{percent:a,strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]}),Object(u.jsxs)("div",{className:"hero-stats-list_item",title:i,children:[Object(u.jsx)("p",{children:"Strength"}),Object(u.jsx)(E.b,{percent:i,strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]})]})},H=function(e){var t=e.hero,c=t.name,n=t.image,r=t.powerstats,a=Object(s.useContext)(k).dispatch,i=Object(s.useContext)(A),o=i.setHero,l=i.isChangeModal;return Object(u.jsxs)("div",{className:"herocard-container",children:[Object(u.jsxs)("div",{className:"herocard_img-remove",children:[Object(u.jsx)("img",{src:n.url,alt:c}),Object(u.jsx)("button",{className:"btn-secondary",onClick:function(){a({type:b,payload:t})},children:"Remove team"})]}),Object(u.jsxs)("div",{className:"herocard_info-more",children:[Object(u.jsx)("h3",{children:c}),Object(u.jsx)(W,{powerstats:r}),Object(u.jsx)("button",{className:"btn-primary",onClick:function(){l(),o(t)},children:"More stats"})]})]})},T=function(){var e=Object(s.useContext)(k).myTeam.heroes;return Object(u.jsxs)("div",{className:"my-team_screen",children:[Object(u.jsxs)("h1",{children:["My ",Object(u.jsx)("span",{className:"fw-400",children:"team"})]}),Object(u.jsxs)("div",{className:"hero_team-grid",children:[e.map((function(e){return Object(u.jsx)(H,{hero:e},e.id)})),e.length<6&&Object(u.jsx)(i.b,{to:"/search",children:Object(u.jsx)(I,{})})]})]})},R=function(e){var t=e.property,c=t.value,s=t.name,n=function(e){return e/600*100};return Object(u.jsxs)("div",{className:"progress-circle_container",children:[Object(u.jsx)("p",{className:"progress-circle_name",children:s}),Object(u.jsxs)("div",{className:"progress-circle",children:[Object(u.jsx)("p",{className:"progress-circle_title",children:c}),Object(u.jsx)(E.a,{className:"progress-circle_circle",percent:0===n(c)?.1:n(c),strokeWidth:"10",trailWidth:"10",strokeColor:"#4C22B0"})]})]})},P=function(){var e=Object(s.useContext)(k).myTeam,t=e.powerstats,c=t.intelligence,n=t.strength,r=t.speed,a=t.durability,i=t.power,o=t.combat,l=e.appearance,j=l.height,d=l.weight,h=function(t){return parseInt(t/e.heroes.length)};return Object(u.jsxs)("div",{className:"stats-team_screen",children:[Object(u.jsxs)("h1",{children:["Stats ",Object(u.jsx)("span",{className:"fw-400",children:"team"})]}),Object(u.jsxs)("div",{className:"stats-team_grid",children:[Object(u.jsx)(R,{property:{value:o,name:"Combat"}}),Object(u.jsx)(R,{property:{value:a,name:"Durability"}}),Object(u.jsx)(R,{property:{value:c,name:"Intelligence"}}),Object(u.jsx)(R,{property:{value:i,name:"Power"}}),Object(u.jsx)(R,{property:{value:r,name:"Speed"}}),Object(u.jsx)(R,{property:{value:n,name:"Strength"}}),Object(u.jsxs)("div",{className:"progress-circle_container",children:[Object(u.jsx)("p",{children:"Height promedy"}),Object(u.jsxs)("h2",{className:"c-primary",children:[h(j)?h(j):0," cm"]}),Object(u.jsx)("p",{children:"Weight promedy"}),Object(u.jsxs)("h2",{className:"c-primary",children:[h(d)?h(d):0," kg"]})]})]})]})},B=function(){return Object(u.jsxs)("div",{className:"home_screen",children:[Object(u.jsx)(T,{}),Object(u.jsx)(P,{})]})},L=c(43),q=c.n(L),V=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(!1),a=Object(l.a)(r,2),i=a[0],o=a[1];return{heroes:c,getHeroesByName:function(e){o(!0),function(e){var t="https://superheroapi.com/api.php/".concat("379932106978719");return q.a.get("".concat(t,"/search/").concat(e))}(e).then((function(e){n(e.data.results),o(!1)})).catch((function(){o(!1)}))},load:i}},D=function(e){var t=e.hero,c=Object(s.useContext)(k),n=c.myTeam,r=c.dispatch,a=Object(s.useContext)(A),i=a.setHero,o=a.isChangeModal,j=Object(s.useState)(""),d=Object(l.a)(j,2),m=d[0],p=d[1],O=n.heroes,x=n.alignment,g=t.biography;return Object(s.useEffect)((function(){return 6===O.length?p("Full team"):"bad"===g.alignment&&3===x.bad?p("Complete bad heroes"):"good"===g.alignment&&3===x.good?p("Complete good heroes"):void p("")}),[n]),Object(u.jsxs)("div",{className:"hero-card-search",children:[Object(u.jsx)("h1",{children:t.name}),Object(u.jsx)("img",{src:t.image.url,alt:t.name}),O.some((function(e){return e.id===t.id}))?Object(u.jsx)("button",{className:"btn-primary btn-warning",onClick:function(){r({type:b,payload:t})},children:"Remove hero"}):Object(u.jsx)("button",{className:"btn-primary",onClick:function(){r({type:h,payload:t})},disabled:""!==m,children:""===m?"Add my team":m}),Object(u.jsx)("button",{className:"btn-secondary",onClick:function(){o(),i(t)},children:"View more"})]})},J=function(){var e=V(),t=e.heroes,c=e.getHeroesByName,s=e.load;return Object(u.jsxs)("div",{className:"search_screen",children:[Object(u.jsxs)("div",{className:"search-title-form",children:[Object(u.jsxs)("h1",{children:["Search ",Object(u.jsx)("span",{className:"fw-400",children:"Hero"})]}),Object(u.jsx)(f.d,{initialValues:{search:""},onSubmit:function(e){c(e.search)},validate:function(e){var t={};return e.search||(t.search="The field cannot be empty"),t},children:function(e){return Object(u.jsxs)(f.c,{className:"search-form",children:[Object(u.jsx)(f.b,{className:"form-control",placeholder:"Batman",name:"search",autoComplete:"off"}),Object(u.jsx)("button",{className:"btn-primary",type:"submit",disabled:!e.isValid,children:"Search"})]})}})]}),Object(u.jsx)("div",{className:"search_grid",children:s?Object(u.jsx)("div",{className:"spinner"}):t?t.slice(0,15).map((function(e){return!("null"===e.powerstats.intelligence)&&Object(u.jsx)(D,{hero:e},e.id)})):Object(u.jsx)("p",{children:"No results found."})}),Object(u.jsx)("button",{className:"btn-primary search-back-btn",children:Object(u.jsx)(i.b,{to:"/",children:"Back to my team"})})]})},F=function(){var e=Object(s.useContext)(O).dispatch;return Object(u.jsxs)("div",{className:"Navbar",children:[Object(u.jsxs)("h3",{children:["Hi ",Object(u.jsx)("span",{className:"fw-400",children:"alkemer!"})]}),Object(u.jsx)(i.c,{to:"/",children:"HEROES APP"}),Object(u.jsx)("p",{onClick:function(){return e({type:d})},children:"Logout"})]})},U=function(e){var t=e.isOpenModal,c=e.isChangeModal,s=e.children;return Object(u.jsx)("div",{className:"modal__main ".concat(t&&"modal__main-open"),onClick:c,children:s})},G=function(e){var t=e.hero,c=e.isChangeModal;return Object(u.jsx)("div",{className:"modal__container",onClick:function(e){e.stopPropagation()},children:!(null===t)&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:t.image.url,alt:t.name}),Object(u.jsxs)("div",{className:"moda__info",children:[Object(u.jsx)("h3",{children:t.biography["full-name"]}),Object(u.jsx)("p",{className:"fw-400 c-primary",children:t.biography.aliases}),Object(u.jsxs)("p",{children:["Weight: ",Object(u.jsx)("span",{className:"fw-400 c-primary",children:t.appearance.weight[1]})]}),Object(u.jsxs)("p",{children:["Height: ",Object(u.jsx)("span",{className:"fw-400 c-primary",children:t.appearance.height[1]})]}),Object(u.jsxs)("p",{children:["Eyes: ",Object(u.jsx)("span",{className:"fw-400 c-primary",children:t.appearance["eye-color"]})]}),Object(u.jsxs)("p",{children:["Hair: ",Object(u.jsx)("span",{className:"fw-400 c-primary",children:t.appearance["hair-color"]})]}),Object(u.jsxs)("p",{children:["Work: ",Object(u.jsx)("span",{className:"fw-400 c-primary",children:t.work.occupation})]}),Object(u.jsx)("button",{className:"btn-primary",onClick:c,children:"Cerrar"})]})]})})},Y=function(){var e=Object(s.useContext)(A),t=e.isOpenModal,c=e.isChangeModal,n=e.hero;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(U,{isOpenModal:t,isChangeModal:c,children:Object(u.jsx)(G,{isChangeModal:c,hero:n})}),Object(u.jsx)(F,{}),Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{exact:!0,path:"/",component:B}),Object(u.jsx)(o.b,{exact:!0,path:"/search",component:J}),Object(u.jsx)(o.a,{to:"/"})]})]})},z=c(18),K=c(25),Q=c(12),X=c.n(Q),Z=["isAuthenticated","component"],$=function(e){var t=e.isAuthenticated,c=e.component,s=Object(K.a)(e,Z);return Object(u.jsx)(o.b,Object(z.a)(Object(z.a)({},s),{},{component:function(e){return t?Object(u.jsx)(c,Object(z.a)({},e)):Object(u.jsx)(o.a,{to:"/login"})}}))};$.protoTypes={isAuthenticated:X.a.bool.isRequired,component:X.a.func.isRequired};var ee=["isAuthenticated","component"],te=function(e){var t=e.isAuthenticated,c=e.component,s=Object(K.a)(e,ee);return Object(u.jsx)(o.b,Object(z.a)(Object(z.a)({},s),{},{component:function(e){return t?Object(u.jsx)(o.a,{to:"/"}):Object(u.jsx)(c,Object(z.a)({},e))}}))};te.protoTypes={isAuthenticated:X.a.bool.isRequired,component:X.a.func.isRequired};var ce=function(){var e=Object(s.useContext)(O).user;return Object(u.jsx)(i.a,{children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(te,{exact:!0,path:"/login",component:v,isAuthenticated:e.logged}),Object(u.jsx)($,{path:"/",component:Y,isAuthenticated:e.logged})]})})},se=function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(x,{children:Object(u.jsx)(S,{children:Object(u.jsx)(M,{children:Object(u.jsx)(ce,{})})})})})};c(72),c(73),c(74),c(75),c(76),c(77),c(78),c(79);a.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(se,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.327cb270.chunk.js.map